<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DAMPA Resort - Rooms</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <style>
    html, body {
      height: 100%;
    }

    body {
      font-family: "Inter", Arial, sans-serif;
      background: #E8C580;
      color: #3D1203;
      margin: 0;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
    }

    header {
      background: url("images/transient-house-view-2.jpg") no-repeat center / cover;
      height: 160px;
      border-radius: 0 0 14px 14px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      padding: 10px;
    }

    header::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(61, 18, 3, 0.38);
      border-radius: 0 0 14px 14px;
    }

    .header-inner {
      position: relative;
      z-index: 2;
      width: 100%;
      max-width: 1100px;
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      padding: 6px 8px;
    }

    .brand {
      display: flex;
      gap: 10px;
      align-items: center;
      color: #fff;
    }

    .brand img {
      width: 64px;
      height: auto;
      border-radius: 8px;
    }

   
    .filter-bar {
      display: flex;
      gap: 8px;
      align-items: center;
      background: rgba(255, 255, 255, 0.12);
      padding: 6px 8px;
      border-radius: 8px;
    }

    .filter-bar label {
      color: #fff;
      font-weight: 600;
      font-size: 0.9rem;
      margin-right: 4px;
    }

    .filter-bar input,
    .filter-bar select {
      border: none;
      border-radius: 6px;
      padding: 6px 8px;
      outline: none;
      min-width: 110px;
    }

    .filter-bar button {
      background: #E48523;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      font-weight: 700;
    }

    main.container {
      max-width: 1100px;
      margin-top: 18px;
      margin-bottom: 18px;
    }

   
    .room-row {
      display: flex;
      gap: 12px;
      align-items: center;
      background: #fff;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 12px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);
      position: relative;
    }

    .room-image {
      flex: 0 0 160px;
      height: 100px;
      overflow: hidden;
      border-radius: 8px;
    }

    .room-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .room-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 6px;
      padding: 4px 6px;
    }

    .room-info h4 {
      margin: 0;
      color: #C04000;
      font-size: 1.05rem;
      font-weight: 800;
    }

    .room-info p {
      margin: 0;
      color: #3D1203;
    }

    .room-actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-end;
      min-width: 180px;
    }

    .add-btn {
      background-color: #E48523;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      font-weight: 700;
    }

    .add-btn:hover {
      background: #C04000;
      color: #fff;
    }

    
    .selected-section {
      margin-top: 18px;
      background: #F2D19B;
      border-radius: 12px;
      padding: 14px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);
    }

    .selected-section h5 {
      margin: 0 0 10px 0;
      font-weight: 800;
      color: #3D1203;
    }

    .room-list-wrapper {
      flex-grow: 1;
      max-height: 100px;
      overflow-y: auto;
      border: 1px solid #d8cab0;
      background: #fff7ed;
      border-radius: 6px;
      padding: 6px;
    }

    #room-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    #room-list li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #fff;
      margin: 8px 0;
      padding: 10px 14px;
      border-radius: 8px;
      box-shadow: 0 1px 0 rgba(0, 0, 0, 0.03);
    }

    #room-list li .room-left strong {
      font-weight: 600;
      color: #3D1203;
    }

    .remove-room {
      background: none;
      border: none;
      color: #ff4d4d;
      font-size: 20px;
      cursor: pointer;
    }

    .selected-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
    }

    .total-label {
      font-weight: 800;
      color: #3D1203;
    }

    .book-btn {
      background: #C04000;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 10px 16px;
      font-weight: 700;
      cursor: pointer;
    }

    .book-btn:hover {
      background: #3D1203;
      transform: translateY(-1px);
    }

    @media (max-width: 767px) {
      .room-row {
        flex-direction: column;
        align-items: stretch;
      }
      .room-image {
        width: 100%;
        height: 160px;
      }
      .room-actions {
        align-items: stretch;
        min-width: auto;
        flex-direction: row;
        justify-content: space-between;
      }
      .room-list-wrapper {
        height: 180px;
      }
      .book-btn {
        width: 100%;
      }
    }
    .details-link {
        cursor: pointer;
        color: #C04000;
        }
        .details-link:hover {
        color: #C04000;
        }

  </style>
</head>

<body>
  <header>
    <div class="header-inner">
      <div class="brand">
        <img src="images/Dampa Logo.png" alt="DAMPA Logo">
        <div>
          <h3 style="margin:0; font-size:1.1rem;">DAMPA Resort</h3>
          <small style="opacity:0.9;">Rooms & Reservations</small>
        </div>
      </div>

      <div class="filter-bar">
        <label>Date:</label>
        <input type="date" id="filterDate">
        <label>Capacity:</label>
        <select id="filterCapacity">
          <option value="">All Capacities</option>
          <option value="1-5">1‚Äì5 pax</option>
          <option value="6-10">6‚Äì10 pax</option>
          <option value="11-15">11‚Äì15 pax</option>
          <option value="16-20">16‚Äì20 pax</option>
        </select>
        <label>Price:</label>
        <select id="filterPrice">
          <option value="">All Prices</option>
          <option value="0-1000">‚Ç±0 ‚Äì ‚Ç±1,000</option>
          <option value="1000-3000">‚Ç±1,000 ‚Äì ‚Ç±3,000</option>
          <option value="3000-5000">‚Ç±3,000 ‚Äì ‚Ç±5,000</option>
          <option value="5000+">‚Ç±5,000+</option>
        </select>
        <button onclick="applyFilters()">Filter <i class="bi bi-funnel"></i></button>
      </div>
    </div>
  </header>

  <main class="container my-4">
    <div class="room-row" data-price="7000" data-capacity="15" data-key="Room 1">
      <div class="room-image"><img src="images/ac-room-1.jpg" alt="Room 1"></div>
      <div class="room-info">
        <h4>Room 1</h4>
        <p><strong>‚Ç±7,000 / night</strong></p>
        <p>Capacity: 15 pax</p>
        <small class="text-muted">With Air-conditioning ‚Ä¢ Own CR ‚Ä¢ Free cottage extension</small>
        <span class="details-link" onclick="showRoomDetails('room1')">‚ÑπÔ∏è Details</span>
        
      </div>
      <div class="room-actions">
        <div>Status: <span style="font-weight:800; color:#2ecc71;">Available</span></div>
        <button class="add-btn" onclick="addRoom('Room 1',7000,this)">Add</button>
      </div>
    </div>

    <div class="room-row" data-price="7000" data-capacity="15" data-key="Room 2">
      <div class="room-image"><img src="images/ac-room-1 (3).jpg" alt="Room 2"></div>
      <div class="room-info">
        <h4>Room 2</h4>
        <p><strong>‚Ç±7,000 / night</strong></p>
        <p>Capacity: 15 pax</p>
        <small class="text-muted">With Air-conditioning ‚Ä¢ Own CR ‚Ä¢ Free cottage extension</small>
       <span class="details-link" onclick="showRoomDetails('room2')">‚ÑπÔ∏è Details</span>

      </div>
      <div class="room-actions">
        <div>Status: <span style="font-weight:800; color:#2ecc71;">Available</span></div>
        <button class="add-btn" onclick="addRoom('Room 2',7000,this)">Add</button>
      </div>
    </div>

    <div class="room-row" data-price="7000" data-capacity="15" data-key="Room 3">
      <div class="room-image"><img src="images/ac-room-3.jpg" alt="Room 3"></div>
      <div class="room-info">
        <h4>Room 3</h4>
        <p><strong>‚Ç±7,000 / night</strong></p>
        <p>Capacity: 15 pax</p>
        <small class="text-muted">With Air-conditioning ‚Ä¢ Own CR ‚Ä¢ Free cottage extension</small>
        <span class="details-link" onclick="showRoomDetails('room3')">‚ÑπÔ∏è Details</span>

      </div>
      <div class="room-actions">
        <div>Status: <span style="font-weight:800; color:#2ecc71;">Available</span></div>
        <button class="add-btn" onclick="addRoom('Room 3',7000,this)">Add</button>
      </div>
    </div>

    <div class="room-row" data-price="2500" data-capacity="7" data-key="Couple Room">
      <div class="room-image"><img src="images/ac-room3-room.jpg" alt="Couple Room"></div>
      <div class="room-info">
        <h4>Couple Room</h4>
        <p><strong>‚Ç±2,500 / night</strong></p>
        <p>Capacity: 2‚Äì7 pax</p>
        <small class="text-muted">Ideal for couples</small>
        <span class="details-link" onclick="showRoomDetails('room4')">‚ÑπÔ∏è Details</span>

      </div>
      <div class="room-actions">
        <div>Status: <span style="font-weight:800; color:#2ecc71;">Available</span></div>
        <button class="add-btn" onclick="addRoom('Couple Room',2500,this)">Add</button>
      </div>
    </div>

    <div class="room-row" data-price="7000" data-capacity="20" data-key="Big Room">
      <div class="room-image"><img src="images/ac-room1-cottage.jpg" alt="Big Room"></div>
      <div class="room-info">
        <h4>Big Room</h4>
        <p><strong>‚Ç±7,000 / night</strong></p>
        <p>Capacity: 20 pax</p>
        <small class="text-muted">Great for large groups</small>
       <span class="details-link" onclick="showRoomDetails('room5')">‚ÑπÔ∏è Details</span>
      </div>
      <div class="room-actions">
        <div>Status: <span style="font-weight:800; color:#2ecc71;">Available</span></div>
       <button class="add-btn" onclick="addRoom('Big Room',7000,this)">Add</button>
      </div>
    </div>
     <div class="modal fade" id="roomModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="border-radius: 12px;">
        <div class="modal-header" style="background:#C04000; color:#fff;">
          <h5 class="modal-title" id="roomModalLabel"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
        </div>
        <div class="modal-body" id="roomModalBody" style="color:#3D1203;"></div>
      </div>
    </div>
  </div>

    <div class="selected-section">
      <h5>Selected Rooms</h5>
      <div class="room-list-wrapper mb-3">
        <ul id="room-list"></ul>
      </div>
      <div class="selected-footer">
        <div class="total-label">Total: ‚Ç±<span id="total">0</span>.00</div>
        <button class="book-btn" id="bookBtn">Book</button>
      </div>
    </div>

    <div class="modal fade" id="roomModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="border-radius: 12px;">
          <div class="modal-header" style="background:#C04000; color:#fff;">
            <h5 class="modal-title" id="roomModalLabel"></h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
          </div>
          <div class="modal-body" id="roomModalBody" style="color:#3D1203;"></div>
        </div>
      </div>
    </div>
  </main>

  <div id="notification" style="position: fixed; bottom: 20px; right: 20px; background: #C04000; color: #fff; padding: 10px 18px; border-radius: 8px; box-shadow: 0 3px 6px rgba(0,0,0,0.2); display: none; z-index: 2000; font-weight: 600;"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const loggedInUserName = "Elmira Despo";

function addRoom(name, price, btn) {
  const key = btn.closest('.room-row').dataset.key || name;
  const list = document.getElementById("room-list");
  const existing = [...list.children].find(li => li.dataset.roomName === key);
  if (existing) {
    showNotification(`‚ö†Ô∏è ${key} is already added.`);
    return;
  }
  const li = document.createElement("li");
  li.dataset.roomName = key;
  li.dataset.price = price;
  li.innerHTML = `
    <div class="room-left"><strong>${key}</strong></div>
    <div style="display:flex; align-items:center; gap:12px;">
      <div class="room-right">‚Ç±${price.toLocaleString()}</div>
      <button class="remove-room" title="Remove" aria-label="Remove ${key}">&times;</button>
    </div>
  `;
  li.querySelector('.remove-room').addEventListener('click', () => {
    li.remove();
    updateTotal();
    showNotification(`‚ùå Removed ${key}`);
  });
  list.appendChild(li);
  updateTotal();
  showNotification(`‚úÖ Added ${key} to selected rooms.`);
}

function updateTotal() {
  let total = 0;
  document.querySelectorAll("#room-list li").forEach(li => {
    total += Number(li.dataset.price) || 0;
  });
  document.getElementById("total").textContent = total.toLocaleString();
}

function showNotification(message) {
  const box = document.getElementById("notification");
  box.textContent = message;
  box.style.display = "block";
  box.style.opacity = "1";
  setTimeout(() => {
    box.style.transition = "opacity 0.5s";
    box.style.opacity = "0";
  }, 1800);
  setTimeout(() => {
    box.style.display = "none";
    box.style.opacity = "1";
    box.style.transition = "none";
  }, 2300);
}

const rooms = {
  room1: {
    title: "Room 1",
    description: `
    With Air-conditioning<br>
    Capacity: 15 pax per room (sleeping capacity)<br>
    Rate: ‚Ç±7,000 each<br>
    ‚Ä¢ Each has its own CR (with tiles), sink & faucet (unli water, pressure tank)<br>
    ‚Ä¢ Free open cottage extension (long table, chairs, 1 wall fan)<br>
    ‚Ä¢ Free use of single burner gas stove & stainless steel grill
    `
  },
  room2: {
    title: "Room 2",
    description: `
    With Air-conditioning<br>
    Capacity: 15 pax per room (sleeping capacity)<br>
    Rate: ‚Ç±7,000 each<br>
    ‚Ä¢ Each has its own CR (with tiles), sink & faucet (unli water, pressure tank)<br>
    ‚Ä¢ Free open cottage extension (long table, chairs, 1 wall fan)<br>
    ‚Ä¢ Free use of single burner gas stove & stainless steel grill
    `
  },
  room3: {
    title: "Room 3",
    description: `
    With Air-conditioning<br>
    Capacity: 15 pax per room (sleeping capacity)<br>
    Rate: ‚Ç±7,000 each<br>
    ‚Ä¢ Each has its own CR (with tiles), sink & faucet (unli water, pressure tank)<br>
    ‚Ä¢ Free open cottage extension (long table, chairs, 1 wall fan)<br>
    ‚Ä¢ Free use of single burner gas stove & stainless steel grill
    `
  },
  room4: {
    title: "Couple Room",
    description: `
    For 2 to 7 pax sleeping capacity<br>
    Rate: ‚Ç±2,500<br>
    ‚Ä¢ Own CR, sink & faucet<br>
    ‚Ä¢ Free open cottage extension with long table, chairs, wall fan<br>
    ‚Ä¢ Free use of single burner gas stove & stainless steel grill
    `
  },
  room5: {
    title: "Big Room",
    description: `
    For 20 pax sleeping capacity<br>
    Rate: ‚Ç±7,000<br>
    ‚Ä¢ Own CR, sink & faucet<br>
    ‚Ä¢ Free open cottage extension with long table, chairs, wall fan<br>
    ‚Ä¢ Free use of single burner gas stove & stainless steel grill
    `
  }
};

function showRoomDetails(key) {
  const room = rooms[key];
  if (!room) return;
  document.getElementById('roomModalLabel').textContent = room.title;
  document.getElementById('roomModalBody').innerHTML = room.description;
  const modal = new bootstrap.Modal(document.getElementById('roomModal'));
  modal.show();
}

function applyFilters() {
  const capRange = document.getElementById("filterCapacity").value;
  const priceRange = document.getElementById("filterPrice").value;
  let minCap = 0, maxCap = 999;
  if (capRange) {
    const parts = capRange.split("-");
    minCap = parseInt(parts[0]);
    maxCap = parts[1] ? parseInt(parts[1]) : 999;
  }
  document.querySelectorAll(".room-row").forEach(room => {
    const rCap = parseInt(room.dataset.capacity);
    const rPrice = parseInt(room.dataset.price);
    let show = true;
    if (!(rCap >= minCap && rCap <= maxCap)) show = false;
    if (priceRange) {
      if (priceRange === "0-1000" && rPrice > 1000) show = false;
      else if (priceRange === "1000-3000" && (rPrice < 1000 || rPrice > 3000)) show = false;
      else if (priceRange === "3000-5000" && (rPrice < 3000 || rPrice > 5000)) show = false;
      else if (priceRange === "5000+" && rPrice < 5000) show = false;
    }
    room.style.display = show ? "flex" : "none";
  });
}

document.getElementById('bookBtn').addEventListener('click', () => {
  const total = Number(document.getElementById("total").textContent.replace(/,/g, '')) || 0;
  if (total === 0) {
    showNotification("üè† Please select at least one room before booking.");
    return;
  }

  const selectedRooms = [...document.querySelectorAll("#room-list li")].map(li => ({
    name: li.dataset.roomName,
    qty: 1,
    amount: Number(li.dataset.price)
  }));

  const bookingData = {
    guestName: loggedInUserName,
    rooms: selectedRooms,
    total: total,
    bookingDate: new Date().toISOString()
  };

  localStorage.setItem('dampa_booking', JSON.stringify(bookingData));

  showNotification("‚úÖ Booking saved! Redirecting...");

  setTimeout(() => {
    window.location.href = "pay.html";
  }, 1000);
});

</script>

</body>
</html>
